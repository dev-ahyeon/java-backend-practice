# Chapter 04 Review

---

## 1. 프로토콜(Protocol)

### ✅ 개념
- 네트워크에서 데이터를 주고받기 위한 **약속, 규칙의 집합**
- 대표적으로 HTTP, HTTPS, FTP, SMTP, DNS, TCP, UDP 등이 있음
- 프로토콜이 없다면 서로 다른 시스템 간의 통신이 불가능

### 💡 예시
- HTTP: 웹 브라우저 ↔ 웹 서버 간 통신
- SMTP: 메일 전송
- DNS: 도메인 이름을 IP 주소로 변환

---

## 2. 웹 브라우저에서 www.google.com 접속 시 과정

### ✅ 전체 흐름
1. **URL 입력 및 파싱** 
- 사용자가 `www.google.com` 입력 시 브라우저는 URL을 **스킴(Scheme), 호스트(Host), 포트(Port), 경로(Path), 쿼리(Query), 프래그먼트(Fragment)** 단위로 파싱한다.
- 기본 포트가 생략된 경우, 브라우저는 프로토콜에 따라 자동으로 채워 넣는다.
    - `http` → 80
    - `https` → 443
- 브라우저는 파싱한 정보를 기반으로 **HTTP 요청 메시지**를 생성한다.
    ```
    예: `https://www.google.com/search?q=url`
    ```
  - 프로토콜(Scheme): `https`
  - 호스트(Host): `www.google.com`
  - 포트(Port): `443` (HTTPS 기본값)
  - 경로(Path): `/search`
  - 쿼리(Query): `q=url`
  - 프래그먼트(Fragment): 없음 (`#section1` 같은 건 클라이언트 전용 처리)  

   ```http
   GET /search?q=url HTTP/1.1
   Host: www.google.com
   ```
  최종적으로 브라우저는 위와 같은 요청을 만들어 서버로 전송한다.  


2. **DNS 조회**
- 도메인을 IP 주소로 변환
- 로컬 캐시 → OS 캐시 → DNS 서버 순으로 탐색

   
3. **트래픽 전송 (TCP/IP 계층 모델)**
- 애플리케이션 계층: HTTP 요청 생성
- 전송 계층: TCP 3-way handshake, 포트 지정(80/443)
- 네트워크 계층: IP 주소 기반 라우팅
- 데이터 링크 계층: MAC 주소 기반 전달 → 실제 네트워크 인터페이스 카드(NIC)를 통해 패킷이 물리적으로 나감


4. **라우터 경로 탐색**
- 라우터는 라우팅 테이블을 기반으로 목적지까지의 최적 경로를 선택
- 구글 서버의 공인 IP에 도달할 때까지 여러 네트워크 장비를 거침


5. **구글 웹 서버 접근**
- 서버 장비는 로드 밸런서를 거쳐 적절한 서버 인스턴스로 요청을 전달
- 웹 서버(WEB) 또는 WAS가 요청을 처리 후 HTML/JSON 응답 반환

6. **브라우저 렌더링 및 추가 처리**
- HTML → DOM 트리 구성
- CSS 파싱 → 스타일 적용
- JS 실행 → 동적 렌더링
- 추가 리소스(img, css, js 파일 등) 병렬 요청 후 화면 완성

---

## 3. TCP와 UDP의 차이

| 구분        | TCP (Transmission Control Protocol) | UDP (User Datagram Protocol) |
|-------------|--------------------------------------|-------------------------------|
| 연결 방식   | 연결 지향 (3-way handshake)         | 비연결 지향                   |
| 신뢰성      | 패킷 손실 시 재전송, 순서 보장       | 신뢰성 없음 (빠르지만 손실 가능) |
| 속도        | 상대적으로 느림                     | 상대적으로 빠름               |
| 사용 예시   | 웹 브라우징(HTTP/HTTPS), 메일(SMTP) | 스트리밍, 게임, DNS           |

---

## 4. 공인 IP와 사설 IP

### ✅ 개념
- **공인 IP (Public IP)**: 인터넷 상에서 유일하게 식별되는 주소 (ISP가 부여)
- **사설 IP (Private IP)**: 내부 네트워크에서만 사용되는 주소 (중복 가능)

### 💡 예시
- 공인 IP: `210.xxx.xxx.xxx` (집/회사 공유기 외부 주소)
- 사설 IP: `192.168.x.x`, `10.x.x.x` (내부 PC, IoT 장비 등)

### ⚠️ NAT (Network Address Translation)
- 사설 IP ↔ 공인 IP 변환 역할
- 공유기나 방화벽 장비가 수행

---

## 5. 로드 밸런싱 (Load Balancing)

### ✅ 개념
- 다수의 서버에 요청을 분산하여 성능과 안정성을 확보하는 기술
- 단일 서버 과부하 방지, 장애 대응 가능

### 💡 예시
- Nginx, HAProxy, AWS ELB 등
- 쇼핑몰 이벤트 트래픽 → 여러 서버로 균등 분산
- 특정 서버 다운 시 다른 서버가 요청을 대신 처리 (Failover)

---

## 📌 정리
- 프로토콜은 네트워크 통신의 규칙
- 브라우저 접속은 URL 파싱 → DNS 조회 → 트래픽 전송 → 서버 처리 → 브라우저 렌더링 단계
- TCP는 신뢰성, UDP는 속도를 강조
- 공인 IP는 인터넷 식별자, 사설 IP는 내부 네트워크용
- 로드 밸런싱은 분산 처리와 장애 대응을 위한 필수 기술